.. post:: 22 May, 2014 18:30
   :tags: apt, Debian, Linux, срань
   :category: Debian
   :author: Uralbash
   :language: ru

ia32-libs-multiarch:i386 : Зависит: libsane:i386 но он не установлен
====================================================================

Что бы удалить поломанный пакет типа такого:

.. code-block:: bash

   $ sudo apt-get upgrade
   Чтение списков пакетов… Готово
   Построение дерева зависимостей
   Чтение информации о состоянии… Готово
   Возможно, для исправления этих ошибок вы захотите воспользоваться «apt-get -f install».
   Пакеты, имеющие неудовлетворённые зависимости:
    ia32-libs-multiarch:i386 : Зависит: libsane:i386 но он не установлен
   E: Неудовлетворённые зависимости. Попытайтесь использовать -f.

Выполняем то что он просит:

.. code-block:: bash

   $ sudo apt-get -f install
   Чтение списков пакетов… Готово
   Построение дерева зависимостей
   Чтение информации о состоянии… Готово
   Исправление зависимостей… Готово
   Будут установлены следующие дополнительные пакеты:
     libsane:i386
   Предлагаемые пакеты:
     hpoj:i386 hplip:i386 libsane-extras:i386 sane-utils:i386
   НОВЫЕ пакеты, которые будут установлены:
     libsane:i386
   обновлено 0, установлено 1 новых пакетов, для удаления отмечено 0 пакетов, и 1 пакетов не обновлено.
   не установлено до конца или удалено 120 пакетов.
   Необходимо скачать 0 B/3 734 kB архивов.
   После данной операции, объём занятого дискового пространства возрастёт на 8 970 kB.
   Хотите продолжить [Д/н]? y
   (Чтение базы данных … на данный момент установлено 577328 файлов и каталогов.)
   Распаковывается пакет libsane:i386 (из файла …/libsane_1.0.23-0ubuntu1_i386.deb) …
   dpkg: ошибка при обработке параметра /var/cache/apt/archives/libsane_1.0.23-0ubuntu1_i386.deb (--unpack):
    попытка перезаписать общий «/etc/sane.d/dc240.conf», который отличается от других экземпляров пакета libsane:i386
   Отчёты apport не записаны, так достигнут MaxReports
                                                      При обработке следующих пакетов произошли ошибки:
    /var/cache/apt/archives/libsane_1.0.23-0ubuntu1_i386.deb
   E: Sub-process /usr/bin/dpkg returned an error code (1)

Удаляем сломанный пакет через :man:`dpkg`:

.. code-block:: bash

   $ sudo dpkg -r libsane
   dpkg: предупреждение: игнорируется запрос на удаление пакета libsane:amd64, от которого
    сохранились только файлы настройки; чтобы удалить и файлы
    настройки, используйте --purge

Удаляем конфиги пакета:

.. code-block:: bash

   $ sudo dpkg --purge libsane
   (Чтение базы данных … на данный момент установлено 577328 файлов и каталогов.)
   Удаляется пакет libsane:amd64 …
   Вычищаются файлы настройки пакета libsane:amd64 …
   Removing directory /etc/sane.d/ ...
